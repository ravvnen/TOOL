@startuml HypothesesMapping
title Research Hypotheses â†’ System Components Mapping

skinparam backgroundColor #FEFEFE
skinparam rectangle {
    roundCorner 15
}

' Hypotheses (left side)
rectangle "**H1: Correctness**\n\nDo rule-augmented answers\noutperform vanilla LLM?\n\n//Human evaluation (A vs B)//" as H1 #LightBlue

rectangle "**H2: Retrieval Quality**\n\nDoes FTS5 retrieve the\nright rules for a query?\n\n//Precision@5, MRR, NDCG//" as H2 #LightBlue

rectangle "**H3: Replayability**\n\nCan we reconstruct state\nfrom event history alone?\n\n//State Reconstruction Accuracy//" as H3 #LightBlue

rectangle "**H4: Freshness**\n\nHow fast do rule updates\nreach the agents?\n\n//End-to-end latency//" as H4 #LightBlue

rectangle "**H5: Consistency**\n\nDo multiple agents give\nthe same answer?\n\n//Citation agreement rate//" as H5 #LightBlue

' System components (right side)
rectangle "Memory Compiler\n+ LLM Integration" as C1 #LightGreen
rectangle "FTS5 Search\n+ Ranking" as C2 #LightGreen
rectangle "DELTAS Stream\n+ Replay Engine" as C3 #LightGreen
rectangle "SSE Notifications\n+ Projector" as C4 #LightGreen
rectangle "Shared Projection\n+ Determinism" as C5 #LightGreen

' Mappings
H1 --> C1 : tests
H2 --> C2 : tests
H3 --> C3 : tests
H4 --> C4 : tests
H5 --> C5 : tests

note bottom of H1
  Each hypothesis tests a
  specific system property
end note

note bottom of C5
  System is designed to
  make hypotheses testable
end note

@enduml
